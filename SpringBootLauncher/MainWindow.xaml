<Window x:Class="SpringBootLauncher.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:tb="http://www.hardcodet.net/taskbar"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Spring Boot Launcher"
        Width="900" Height="800"
        MinWidth="900" MinHeight="650"
        WindowStartupLocation="CenterScreen"
        Background="#E8EAED"
        ResizeMode="CanResize">

    <Window.Resources>
        <!-- ìƒ‰ìƒ íŒ”ë ˆíŠ¸ (ì§„í•˜ê²Œ ì¡°ì •) -->
        <SolidColorBrush x:Key="PrimaryBg" Color="#E8EAED"/>
        <SolidColorBrush x:Key="CardBg" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="HeaderText" Color="#000000"/>
        <SolidColorBrush x:Key="BodyText" Color="#1a1a1a"/>
        <SolidColorBrush x:Key="MutedText" Color="#5F6368"/>
        <SolidColorBrush x:Key="AccentGreen" Color="#0D9668"/>
        <SolidColorBrush x:Key="AccentRed" Color="#DC2626"/>
        <SolidColorBrush x:Key="AccentBlue" Color="#2563EB"/>
        <SolidColorBrush x:Key="AccentYellow" Color="#D97706"/>
        <SolidColorBrush x:Key="BorderColor" Color="#D1D5DB"/>
        
        <!-- ì¹´ë“œ ìŠ¤íƒ€ì¼ -->
        <Style x:Key="ModernCard" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource CardBg}"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="16"/>
            <Setter Property="Margin" Value="12"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#000000" BlurRadius="12" ShadowDepth="2" Opacity="0.08" Direction="270" RenderingBias="Performance"/>
                </Setter.Value>
            </Setter>
            <!-- GPU ê°€ì†ì„ ìœ„í•œ ë¹„íŠ¸ë§µ ìºì‹± (í¬ê¸° ë³€ê²½ ì‹œ ì„±ëŠ¥ í–¥ìƒ) -->
            <Setter Property="CacheMode">
                <Setter.Value>
                    <BitmapCache EnableClearType="False" RenderAtScale="1" SnapsToDevicePixels="True"/>
                </Setter.Value>
            </Setter>
        </Style>
        
        
        <!-- ë²„íŠ¼ ìŠ¤íƒ€ì¼ -->
        <Style x:Key="PrimaryButton" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource AccentBlue}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="20,12"/>
            <Setter Property="Margin" Value="6"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="8" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Opacity" Value="0.9"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Opacity" Value="0.5"/>
                    <Setter Property="Cursor" Value="Arrow"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <Style x:Key="SuccessButton" TargetType="Button" BasedOn="{StaticResource PrimaryButton}">
            <Setter Property="Background" Value="{StaticResource AccentGreen}"/>
        </Style>
        
        <Style x:Key="DangerButton" TargetType="Button" BasedOn="{StaticResource PrimaryButton}">
            <Setter Property="Background" Value="{StaticResource AccentRed}"/>
        </Style>
        
        <Style x:Key="WarningButton" TargetType="Button" BasedOn="{StaticResource PrimaryButton}">
            <Setter Property="Background" Value="{StaticResource AccentYellow}"/>
        </Style>
        
        <Style x:Key="SecondaryButton" TargetType="Button" BasedOn="{StaticResource PrimaryButton}">
            <Setter Property="Background" Value="#6B7280"/>
        </Style>
        
        <!-- íŠ¸ë ˆì´ ì•„ì´ì½˜ -->
        <tb:TaskbarIcon x:Key="TrayIcon" x:Name="TrayIcon" Visibility="Visible"/>
        
    </Window.Resources>
    
    <Grid Background="{StaticResource PrimaryBg}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>   <!-- JAR ê²½ë¡œ -->
            <RowDefinition Height="Auto"/>   <!-- ìƒíƒœ ì¹´ë“œ -->
            <RowDefinition Height="*"/>      <!-- ë¡œê·¸ -->
            <RowDefinition Height="Auto"/>   <!-- í•˜ë‹¨ë°” -->
        </Grid.RowDefinitions>

        <!-- JAR íŒŒì¼ ê²½ë¡œ ì„ íƒ -->
        <Border Grid.Row="0" Style="{StaticResource ModernCard}" Margin="12,12,12,12">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0"
                               Text="JAR íŒŒì¼ ê²½ë¡œ"
                               FontSize="16"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource HeaderText}"
                               VerticalAlignment="Center"
                               Margin="0,0,8,0"/>

                    <Border Grid.Column="1"
                            BorderBrush="{StaticResource BorderColor}"
                            BorderThickness="1"
                            CornerRadius="8"
                            Background="White">
                        <TextBox x:Name="JarPathTextBox"
                                 BorderThickness="0"
                                 Padding="12,10"
                                 FontSize="14"
                                 VerticalContentAlignment="Center"
                                 ToolTip="JAR íŒŒì¼ ì ˆëŒ€ ê²½ë¡œ"/>
                    </Border>

                    <Button x:Name="BrowseButton"
                            Grid.Column="2"
                            Content="ðŸ“ ì°¾ì•„ë³´ê¸°"
                            Click="BrowseJar_Click"
                            Style="{StaticResource PrimaryButton}"
                            Margin="12,0,0,0"/>

                    <Button x:Name="SettingsButton"
                            Grid.Column="3"
                            Content="âš™ï¸ ì„¤ì •"
                            Click="Settings_Click"
                            Style="{StaticResource SecondaryButton}"
                            Margin="8,0,0,0"/>

                    
                </Grid>
            </Grid>
        </Border>
        
        <!-- ìƒíƒœ & ê°€ë™ì‹œê°„ -->
        <Grid Grid.Row="1" Margin="12,0" Height="60">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <!-- ì„œë²„ ìƒíƒœ -->
            <Border Grid.Column="0" Style="{StaticResource ModernCard}" Margin="0,0,6,0">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
        
                    <TextBlock Grid.Column="0"
                               Text="ì„œë²„ ìƒíƒœ" 
                               FontSize="14" 
                               FontWeight="SemiBold" 
                               Foreground="{StaticResource MutedText}"
                               VerticalAlignment="Center"/>
        
                    <StackPanel Grid.Column="2" 
                                Orientation="Horizontal"
                                VerticalAlignment="Center">
                        <Ellipse x:Name="StatusIndicator" 
                                 Width="20" 
                                 Height="20" 
                                 Fill="{StaticResource AccentRed}" 
                                 Margin="0,0,12,0"/>
                        <TextBlock x:Name="StatusTextBlock" 
                                   Text="ì¤‘ì§€ë¨" 
                                   FontSize="15" 
                                   FontWeight="Bold" 
                                   Foreground="{StaticResource HeaderText}"/>
                    </StackPanel>
                </Grid>
            </Border>
            
            <!-- ê°€ë™ ì‹œê°„ -->
            <Border Grid.Column="1" Style="{StaticResource ModernCard}" Margin="6,0,0,0">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
        
                    <TextBlock Grid.Column="0" 
                               Text="ê°€ë™ ì‹œê°„" 
                               FontSize="14" 
                               FontWeight="SemiBold" 
                               Foreground="{StaticResource MutedText}"
                               VerticalAlignment="Center"/>
        
                    <TextBlock Grid.Column="2" 
                               x:Name="UptimeTextBlock" 
                               Text="00:00:00" 
                               FontSize="20" 
                               FontWeight="Bold" 
                               Foreground="{StaticResource HeaderText}"
                               VerticalAlignment="Center"/>
                </Grid>
            </Border>
        </Grid>
        
        <!-- ì„œë²„ ì œì–´ & ë¡œê·¸ -->
        <Border Grid.Row="2" Style="{StaticResource ModernCard}">
            <DockPanel>
                <!-- ì œì–´ ë²„íŠ¼ -->
                <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="0,0,0,20">
                    <Button x:Name="StartButton" 
                            Content="â–¶ï¸ ì‹œìž‘" 
                            Click="StartButton_Click" 
                            Style="{StaticResource SuccessButton}"/>
                    <Button x:Name="StopButton" 
                            Content="â¹ï¸ ì¤‘ì§€" 
                            Click="StopButton_Click" 
                            Style="{StaticResource DangerButton}"/>
                    <Button x:Name="RestartButton" 
                            Content="ðŸ”„ ìž¬ì‹œìž‘" 
                            Click="RestartButton_Click" 
                            Style="{StaticResource WarningButton}"/>
                    <Button x:Name="ClearLogButton" 
                            Content="ðŸ—‘ï¸ ë¡œê·¸ ì§€ìš°ê¸°" 
                            Click="ClearLogButton_Click" 
                            Style="{StaticResource SecondaryButton}"/>
                    <Button x:Name="ExportLogButton" 
                            Content="ðŸ“¤ Export" 
                            Click="ExportLogButton_Click" 
                            Style="{StaticResource PrimaryButton}"/>
                </StackPanel>
                
                <!-- ë¡œê·¸ ì˜ì—­ -->
                <DockPanel>
                    <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="0,0,0,0">
                    <TextBlock DockPanel.Dock="Top" 
                               Text="ì‹¤ì‹œê°„ ë¡œê·¸" 
                               FontSize="14" 
                               FontWeight="SemiBold" 
                               Foreground="{StaticResource MutedText}"
                               Margin="0,0,0,12"/>
                    <!-- ìžë™ ì‹œìž‘ ì²´í¬ë°•ìŠ¤ -->
                    <CheckBox x:Name="AutoStartCheckBox"
                              Grid.Column="4"
                              Content="ì„œë²„ ìžë™ ì‹¤í–‰"
                              FontSize="13"
                              Foreground="{StaticResource BodyText}"
                              VerticalAlignment="Center"
                              Margin="20,0,0,10"
                              Checked="AutoStartCheckBox_Changed"
                              Unchecked="AutoStartCheckBox_Changed"/>
                    </StackPanel>
                    
                    <Border BorderBrush="{StaticResource BorderColor}"
                            BorderThickness="1"
                            CornerRadius="8"
                            Background="#F9FAFB">
                        <ListBox x:Name="LogListBox"
                                 FontFamily="Consolas, Courier New"
                                 FontSize="12"
                                 BorderThickness="0"
                                 Background="Transparent"
                                 Foreground="{StaticResource BodyText}"
                                 SelectionMode="Extended"
                                 VirtualizingStackPanel.IsVirtualizing="True"
                                 VirtualizingStackPanel.VirtualizationMode="Recycling"
                                 VirtualizingStackPanel.CacheLength="20,20"
                                 VirtualizingStackPanel.CacheLengthUnit="Item"
                                 VirtualizingStackPanel.ScrollUnit="Pixel"
                                 ScrollViewer.IsDeferredScrollingEnabled="False"
                                 ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                 ScrollViewer.VerticalScrollBarVisibility="Auto"
                                 ScrollViewer.CanContentScroll="True"
                                 KeyDown="LogListBox_KeyDown">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding}"
                                               TextWrapping="Wrap"
                                               TextTrimming="None"
                                               Padding="6,4"/>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                            <ListBox.ItemContainerStyle>
                                <Style TargetType="ListBoxItem">
                                    <Setter Property="Padding" Value="0"/>
                                    <Setter Property="Margin" Value="0"/>
                                    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="ListBoxItem">
                                                <Border Background="{TemplateBinding Background}"
                                                        Padding="{TemplateBinding Padding}">
                                                    <ContentPresenter HorizontalAlignment="Stretch" 
                                                                      VerticalAlignment="Top"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#F0F0F0"/>
                                        </Trigger>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter Property="Background" Value="#E0E7FF"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </ListBox.ItemContainerStyle>
                        </ListBox>
                    </Border>
                </DockPanel>
            </DockPanel>
        </Border>
        
        <!-- í•˜ë‹¨ ìƒíƒœë°” -->
        <Border Grid.Row="3" Background="White" Padding="24,16" BorderBrush="{StaticResource BorderColor}" BorderThickness="0,1,0,0">
            <Grid>
                <TextBlock x:Name="StatusBarText" 
                           Text="ì²´í¬ ì£¼ê¸°: 5ë¶„ | ë§ˆì§€ë§‰ ì²´í¬: -" 
                           Foreground="{StaticResource MutedText}"
                           FontSize="12"/>
                <TextBlock Text="ðŸ’¡ í”„ë¡œê·¸ëž¨ì„ ë‹«ìœ¼ë©´ ìž‘ì—…í‘œì‹œì¤„ì— ë°°ì¹˜" 
                           HorizontalAlignment="Right" 
                           Foreground="{StaticResource MutedText}"
                           FontSize="12"/>
            </Grid>
        </Border>
    </Grid>
</Window>
