<Window x:Class="SpringBootInstaller.Windows.ProgressWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="설치 중..."
        Width="800" Height="600"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Background="{StaticResource PrimaryBg}"
        Closing="Window_Closing">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- 메인 콘텐츠 -->
        <Border Grid.Row="0" Background="{StaticResource CardBg}" Margin="15">
            <!-- ⬇️ ScrollViewer 추가 -->
            <ScrollViewer
                VerticalScrollBarVisibility="Auto"
                HorizontalScrollBarVisibility="Disabled"
                CanContentScroll="False"
                Padding="0">

                <StackPanel Margin="25,15">
                    <TextBlock Text="설치 진행 중..."
                               FontSize="22"
                               FontWeight="Bold"
                               Foreground="{StaticResource HeaderText}"
                               Margin="0,0,0,20" />

                    <!-- 진행률 바 -->
                    <StackPanel Margin="0,0,0,20">
                        <Grid Margin="0,0,0,10">
                            <TextBlock x:Name="ProgressPercentText"
                                       Text="0%"
                                       FontSize="18"
                                       FontWeight="Bold"
                                       Foreground="{StaticResource AccentBlue}"
                                       HorizontalAlignment="Right" />
                        </Grid>

                        <Border x:Name="ProgressBarContainer"
                                Background="#E5E7EB"
                                CornerRadius="10"
                                Height="20">
                            <Border x:Name="ProgressBar"
                                    Background="{StaticResource AccentBlue}"
                                    CornerRadius="10"
                                    HorizontalAlignment="Left"
                                    Width="0" />
                        </Border>
                    </StackPanel>

                    <!-- 현재 작업 -->
                    <Border Background="#EFF6FF"
                            BorderBrush="#3B82F6"
                            BorderThickness="1"
                            CornerRadius="8"
                            Padding="15"
                            Margin="0,0,0,15">
                        <StackPanel>
                            <TextBlock Text="현재 작업:"
                                       FontSize="14"
                                       FontWeight="SemiBold"
                                       Foreground="#1E40AF"
                                       Margin="0,0,0,8" />
                            <TextBlock x:Name="CurrentTaskText"
                                       Text="준비 중..."
                                       FontSize="16"
                                       FontWeight="Bold"
                                       Foreground="#1E3A8A"
                                       TextWrapping="Wrap" />
                        </StackPanel>
                    </Border>

                    <!-- 작업 목록 -->
                    <TextBlock Text="작업 목록:"
                               FontSize="14"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource BodyText}"
                               Margin="0,0,0,10" />

                    <Border BorderBrush="{StaticResource BorderColor}"
                            BorderThickness="1"
                            CornerRadius="8"
                            Background="White">
                        <StackPanel x:Name="TaskListPanel" Margin="15">
                            <!-- 작업 항목들이 동적으로 추가됨 -->
                        </StackPanel>
                    </Border>

                    <!-- 실시간 로그 -->
                    <TextBlock Text="설치 로그:"
                               FontSize="14"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource BodyText}"
                               Margin="0,15,0,10" />

                    <Border BorderBrush="{StaticResource BorderColor}"
                            BorderThickness="1"
                            CornerRadius="8"
                            Background="#F9FAFB">
                        <ScrollViewer x:Name="LogScrollViewer"
                                      VerticalScrollBarVisibility="Auto"
                                      HorizontalScrollBarVisibility="Disabled"
                                      Height="300">
                            <TextBlock x:Name="LogTextBlock"
                                       FontFamily="Consolas"
                                       FontSize="11"
                                       Foreground="#374151"
                                       Padding="10"
                                       TextWrapping="Wrap" />
                        </ScrollViewer>
                    </Border>
                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- 하단 버튼 -->
        <Border Grid.Row="1"
                Background="White"
                BorderBrush="{StaticResource BorderColor}"
                BorderThickness="0,1,0,0"
                Padding="20">
            <Button x:Name="CancelButton"
                    Content="취소"
                    Click="CancelButton_Click"
                    Style="{StaticResource SecondaryButton}"
                    HorizontalAlignment="Right" />
        </Border>
    </Grid>
</Window>